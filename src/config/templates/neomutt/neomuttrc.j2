set real_name = "{{ mail.name }}"

# Basic settings
set folder = "~/.local/share/mail/mailbox"
set attach_save_dir = "~/Downloads/"
set mbox_type = "Maildir"
set hostname =  "{{ mail.domain }}"
set from =  "{{ mail.primary }}"
{% for item in mail.aliases %}
alias {{ item.alias }} "{{ mail.name }}" "{{ item.email }}"
{% endfor %}

# Folder settings
set record = +Sent
set spoolfile = +INBOX
set postponed = +Drafts
set trash = +Trash
set header_cache = ~/.cache/mutt
mailboxes `find ~/.local/share/mail/mailbox/INBOX -type d -name cur | xargs dirname | xargs` `find ~/.local/share/mail/mailbox -maxdepth 2 -type d -name cur | grep -v INBOX | grep -v Archives | xargs dirname | xargs`


# Sidebar settings
set sidebar_visible
set sidebar_format = "%B%<N? [%N]>%* %S"
set sidebar_short_path = yes
set mail_check_stats
set sidebar_next_new_wrap = yes
set sidebar_width = 20

# Formatting
set sort = threads
set sort_aux=reverse-date
set date_format="%y/%m/%d %I:%M%p"
color status black white
color sidebar_indicator brightblack white
color indicator brightblack white
color header blue default ".*"
color header green  default "^(From)"
color header  green default "^(Subject)"
color header green default "^(To|CC|BCC)"
color body red default "[\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+" # Email addresses
color body white default "(https?|ftp|file)://[\-\.,/%~_:?&=\#a-zA-Z0-9;+]+" # URL
set new_mail_command = "notify-send -a 'Neomutt' --icon '/usr/share/neomutt/logo/neomutt-32.png' 'New Email in %f' '%n new messages, %u unread' &" 
set compose_show_preview = yes
set compose_preview_min_rows = 0

# Mail settings

set mail_check_stats
set mailcap_path   = ~/.mutt/mailcap
auto_view text/html
alternative_order text/plain text/html
set sendmail = "msmtp -a mailbox"



# Reply settings
set fast_reply
set forward_format = "Fwd: %s"
set forward_quote
set reverse_name
set include
alternates {% for item in mail.aliases -%}
"{{ item.email }}"
{%- endfor %}

# GPG settings
set pgp_sign_as="{{ mail.gpg }}"
set crypt_auto_sign


# Bindings
bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next
bind index,pager \Co sidebar-open
macro index S "<shell-escape>mbsync -a<enter>" "sync email"
macro index a ":set confirmappend=no delete=yes\n<tag-prefix><save-message>+Archive\n<sync-mailbox>:set confirmappend=yes delete=ask-yes\n"
bind editor <Tab> complete-query
bind editor \Ct complete


# Contacts
set query_command = "khard --skip-unparsable email --parsable %s"
