- name: Configure Terminal
  block:
    - name: Setup Alacritty
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: alacritty/alacritty.toml
        dest: "/home/{{ username }}/.config/alacritty/"
        backup: yes

    - name: Setup Shell
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: shell/bashrc
        dest: "/home/{{ username }}/.bashrc"
        backup: yes

    - name: Setup shell user source directory
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: shell/bashrc.d/
        dest: "/home/{{ username }}/.bashrc.d"
        backup: yes

    - name: Setup Starship
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: starship/starship.toml
        dest: "/home/{{ username }}/.config/starship.toml"
        backup: yes

    - name: Setup tmux
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: tmux/.tmux.conf
        dest: "/home/{{ username }}"
        backup: yes


- name: Setup Editor
  block:
    - name: Setup vimrc
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: neovim/vimrc
        dest: "/home/{{ username }}"
        backup: yes

    - name: Setup init.vim
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: neovim/init.vim
        dest: "/home/{{ username }}/.config/nvim/"
        backup: yes

    - name: Setup Vundle
      become: true
      become_user: "{{ username }}"
      ansible.builtin.shell: 'git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim && vim +PluginInstall +qall'
      ignore_errors: true

    - name: Install autoload in right directory
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: "/home/{{ username }}/.vim/bundle/gruvbox-material/autoload/gruvbox_material.vim"
        dest: "/home/{{ username }}/.vim/autoload/"
      ignore_errors: true

    - name: Install colors in right directory
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: "/home/{{ username }}/.vim/bundle/gruvbox-material/colors/gruvbox-material.vim"
        dest: "/home/{{ username }}/.vim/colors/"
      ignore_errors: true


- name: Configure Email
  block:
    - name: Setup msmtprc
      become: true
      become_user: "{{ username }}"
      ansible.builtin.template:
        src: neomutt/msmtprc.j2
        dest: "/home/{{ username }}/.msmtprc"
        backup: yes

    - name: Setup mbsyncrc
      become: true
      become_user: "{{ username }}"
      ansible.builtin.template:
        src: neomutt/mbsyncrc.j2
        dest: "/home/{{ username }}/.mbsyncrc"
        backup: yes

    - name: Setup Neomutt
      become: true
      become_user: "{{ username }}"
      ansible.builtin.template:
        src: neomutt/neomuttrc.j2
        dest: "/home/{{ username }}/.mutt/neomuttrc"
        backup: yes

    - name: Setup Neomutt - Mailcap
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: neomutt/mailcap
        dest: "/home/{{ username }}/.mutt/"
        backup: yes


- name: Configure Misc
  block:
    - name: Setup Wallpapers
      become: true
      become_user: "{{ username }}"
      ansible.builtin.copy:
        src: wallpapers
        dest: "/home/{{ username }}/.config/wallpapers"
        backup: yes
